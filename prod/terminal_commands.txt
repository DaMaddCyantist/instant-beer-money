# cd to the directory containing the Dockerfile

# Build docker image using Dockerfile in current directory
docker build -t <docker_username>/<docker_image_name>:<docker_image_tag> .

# You may occasionally need to use the --no-cache flag to do a clean build.
# docker build --no-cache -t <docker_username>/<docker_image_name>:<docker_image_tag> .

# Push your docker image to the registry
docker push <docker_username>/<docker_image_name>:<docker_image_tag>

# Ensure that you cd to the directory where your python script is located
# Then execute the following command using the ibmcloud CLI.
# NOTE: the `v` flag is optional. It stands for verbose output, which gives more information when running ibmcloud commands
ibmcloud fn action create <action_name> --docker <docker_username>/<docker_image_name>:<docker_image_tag> <python_script.py> --web true -v
